[package]
name = "service"
version = "0.1.0"
edition = "2021"
publish = false
license = "MPL-2.0"
authors = ["RÃ©mi Bardon <remi@remibardon.name>"]

[dependencies]
chrono = "0.4"
entity = { path = "../entity" }
figment = { version = "0.10", features = ["toml"] }
lazy_static = "1.4"
lettre = { version = "0.11", features = [
    "smtp-transport",
    "native-tls",
    "hostname",
    "builder",
], default-features = false }
log = { version = "0.4", features = ["std"] }
prosody-config = { path = "../prosody-config" }
serde = "1"
url_serde = "0.2"
uuid = "1.8"

[dependencies.sea-orm]
version = "1.0.0-rc.1"
features = [
    "runtime-tokio-rustls",
    "sqlx-sqlite",
    #"macros",
]

[dev-dependencies]
cucumber = "0.20"
insta = "1"
migration = { path = "../migration" }
tokio = "1.20"

[features]
mock = ["sea-orm/mock"]

[[test]]
name = "mock"
required-features = ["mock"]

[[test]]
name = "cucumber"
harness = false
